<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ƒê·ªÅ Ki·ªÉm Tra L·ªãch S·ª≠ ‚Äì ƒê·ªÅ S·ªë 16</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #c9a84c;
    --gold-light: #e8c97a;
    --gold-dark: #8b6914;
    --parchment: #f5efe0;
    --parchment-dark: #e8dcc8;
    --ink: #1a1208;
    --ink-light: #3d2e10;
    --red-seal: #8b1a1a;
    --red-seal-light: #c0392b;
    --green-ok: #2d6a4f;
    --bg-dark: #0f0a03;
    --shadow: rgba(0,0,0,0.4);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg-dark);
    color: var(--ink);
    font-family: 'Crimson Text', serif;
    font-size: 17px;
    min-height: 100vh;
    background-image:
      radial-gradient(ellipse at 20% 50%, rgba(201,168,76,0.07) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 20%, rgba(139,26,26,0.05) 0%, transparent 50%),
      url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23c9a84c' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
  }

  .site-header {
    background: linear-gradient(180deg, #1a0e02 0%, #0f0a03 100%);
    border-bottom: 2px solid var(--gold-dark);
    padding: 30px 20px 20px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .site-header::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, var(--gold), var(--gold-light), var(--gold), transparent);
  }
  .site-header .subtitle {
    font-family: 'IM Fell English', serif;
    font-style: italic;
    color: var(--gold-light);
    letter-spacing: 3px;
    font-size: 12px;
    text-transform: uppercase;
    margin-bottom: 10px;
    opacity: 0.8;
  }
  .site-header h1 {
    font-family: 'Playfair Display', serif;
    font-size: clamp(24px, 4vw, 42px);
    font-weight: 900;
    color: var(--gold-light);
    text-shadow: 0 0 40px rgba(201,168,76,0.3), 2px 2px 0 rgba(0,0,0,0.5);
    letter-spacing: 1px;
    line-height: 1.2;
  }
  .site-header h1 span { color: var(--parchment); }
  .ornament {
    color: var(--gold-dark);
    font-size: 20px;
    margin: 8px 0;
    letter-spacing: 8px;
    opacity: 0.6;
  }
  .header-meta {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-top: 12px;
    flex-wrap: wrap;
  }
  .header-meta span {
    font-family: 'IM Fell English', serif;
    font-style: italic;
    color: rgba(201,168,76,0.7);
    font-size: 13px;
    letter-spacing: 1px;
  }

  .timer-bar {
    background: linear-gradient(135deg, #1a0e02, #2a1a05);
    border-bottom: 1px solid var(--gold-dark);
    padding: 12px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  }
  .timer-display {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .timer-icon {
    width: 36px; height: 36px;
    border: 2px solid var(--gold-dark);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    color: var(--gold);
    font-size: 16px;
    animation: pulse-timer 1s ease-in-out infinite;
  }
  @keyframes pulse-timer {
    0%, 100% { box-shadow: 0 0 0 0 rgba(201,168,76,0.4); }
    50% { box-shadow: 0 0 0 6px rgba(201,168,76,0); }
  }
  #timer-text {
    font-family: 'Playfair Display', serif;
    font-size: 22px;
    font-weight: 700;
    color: var(--gold-light);
    letter-spacing: 2px;
    min-width: 65px;
    transition: color 0.3s;
  }
  #timer-text.warning { color: #e67e22; animation: flicker 0.5s ease-in-out infinite; }
  #timer-text.danger { color: var(--red-seal-light); }
  @keyframes flicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
  .timer-label {
    font-family: 'IM Fell English', serif;
    font-style: italic;
    color: rgba(201,168,76,0.5);
    font-size: 12px;
    letter-spacing: 1px;
  }
  .timer-progress {
    flex: 1;
    margin: 0 20px;
    height: 4px;
    background: rgba(201,168,76,0.15);
    border-radius: 2px;
    overflow: hidden;
  }
  .timer-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold-dark), var(--gold));
    border-radius: 2px;
    transition: width 1s linear, background 0.5s;
    width: 100%;
  }
  .timer-fill.warning { background: linear-gradient(90deg, #c0392b, #e67e22); }
  .submit-btn-top {
    background: linear-gradient(135deg, var(--red-seal), var(--red-seal-light));
    color: var(--parchment);
    border: 1px solid rgba(255,255,255,0.2);
    padding: 8px 18px;
    border-radius: 4px;
    cursor: pointer;
    font-family: 'Playfair Display', serif;
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 1px;
    transition: all 0.3s;
    white-space: nowrap;
  }
  .submit-btn-top:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(139,26,26,0.5);
  }

  .main-container {
    max-width: 860px;
    margin: 0 auto;
    padding: 30px 16px 60px;
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin: 40px 0 24px;
  }
  .section-header::before, .section-header::after {
    content: '';
    flex: 1;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--gold-dark));
  }
  .section-header::after { background: linear-gradient(90deg, var(--gold-dark), transparent); }
  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 13px;
    font-weight: 700;
    color: var(--gold);
    text-transform: uppercase;
    letter-spacing: 4px;
    white-space: nowrap;
  }
  .section-desc {
    background: linear-gradient(135deg, rgba(201,168,76,0.06), rgba(201,168,76,0.02));
    border: 1px solid rgba(201,168,76,0.2);
    border-left: 3px solid var(--gold-dark);
    padding: 14px 18px;
    border-radius: 0 6px 6px 0;
    margin-bottom: 20px;
  }
  .section-desc p {
    font-family: 'IM Fell English', serif;
    font-style: italic;
    color: rgba(201,168,76,0.7);
    font-size: 14px;
    line-height: 1.6;
  }

  .q-card {
    background: linear-gradient(160deg, rgba(245,239,224,0.97), rgba(232,220,200,0.95));
    border: 1px solid rgba(201,168,76,0.3);
    border-radius: 8px;
    padding: 24px 26px;
    margin-bottom: 16px;
    position: relative;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.5);
    transition: box-shadow 0.3s;
  }
  .q-card:hover { box-shadow: 0 6px 30px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.5); }
  .q-card.answered { border-color: rgba(201,168,76,0.5); }
  .q-number-badge {
    position: absolute;
    top: -1px; left: -1px;
    background: linear-gradient(135deg, var(--gold-dark), var(--gold));
    color: var(--ink);
    font-family: 'Playfair Display', serif;
    font-weight: 900;
    font-size: 11px;
    padding: 4px 10px;
    border-radius: 8px 0 8px 0;
    letter-spacing: 1px;
  }
  .q-text {
    font-family: 'Crimson Text', serif;
    font-size: 16.5px;
    color: var(--ink);
    line-height: 1.7;
    margin-bottom: 16px;
    padding-top: 8px;
  }

  .q-passage {
    background: rgba(139,105,20,0.07);
    border: 1px solid rgba(201,168,76,0.25);
    border-radius: 6px;
    padding: 16px 18px 14px 24px;
    margin-bottom: 16px;
    font-family: 'IM Fell English', serif;
    font-style: italic;
    font-size: 15px;
    color: #3d2e10;
    line-height: 1.8;
    position: relative;
  }
  .q-passage::before {
    content: '"';
    position: absolute;
    top: -8px; left: 14px;
    font-size: 48px;
    color: var(--gold-dark);
    opacity: 0.4;
    font-family: 'Playfair Display', serif;
    line-height: 1;
  }
  .q-passage-source {
    font-size: 13px;
    color: rgba(61,46,16,0.6);
    margin-top: 8px;
    font-style: italic;
  }

  .q-table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 16px;
    font-size: 15px;
    font-family: 'Crimson Text', serif;
  }
  .q-table th {
    background: linear-gradient(135deg, var(--gold-dark), var(--gold));
    color: var(--ink);
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    padding: 10px 14px;
    text-align: left;
    font-size: 13px;
    letter-spacing: 1px;
  }
  .q-table td {
    padding: 9px 14px;
    border-bottom: 1px solid rgba(201,168,76,0.2);
    color: var(--ink-light);
    line-height: 1.5;
  }
  .q-table tr:nth-child(even) td { background: rgba(201,168,76,0.05); }

  .options-grid { display: grid; gap: 9px; }
  .option-label {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 11px 14px;
    border: 1.5px solid rgba(139,105,20,0.25);
    border-radius: 6px;
    cursor: pointer;
    background: rgba(255,255,255,0.4);
    transition: all 0.2s;
    line-height: 1.6;
    font-size: 16px;
  }
  .option-label:hover { border-color: var(--gold); background: rgba(201,168,76,0.1); }
  .option-label input[type="radio"] { display: none; }
  .option-key {
    flex-shrink: 0;
    width: 26px; height: 26px;
    border: 2px solid var(--gold-dark);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    font-size: 12px;
    color: var(--gold-dark);
    transition: all 0.2s;
    margin-top: 1px;
  }
  .option-label.selected { border-color: var(--gold); background: rgba(201,168,76,0.15); box-shadow: inset 0 0 0 1px rgba(201,168,76,0.3); }
  .option-label.selected .option-key { background: var(--gold); color: var(--ink); border-color: var(--gold); }
  .option-label.correct { border-color: var(--green-ok) !important; background: rgba(45,106,79,0.12) !important; }
  .option-label.correct .option-key { background: var(--green-ok); color: white; border-color: var(--green-ok); }
  .option-label.wrong { border-color: var(--red-seal) !important; background: rgba(139,26,26,0.1) !important; }
  .option-label.wrong .option-key { background: var(--red-seal); color: white; border-color: var(--red-seal); }

  .tf-options { display: grid; gap: 9px; }
  .tf-item {
    border: 1.5px solid rgba(139,105,20,0.25);
    border-radius: 6px;
    padding: 12px 14px;
    background: rgba(255,255,255,0.4);
  }
  .tf-statement {
    font-size: 15.5px;
    color: var(--ink);
    line-height: 1.65;
    margin-bottom: 10px;
    display: flex;
    gap: 8px;
  }
  .tf-key-letter {
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    color: var(--gold-dark);
    flex-shrink: 0;
    font-size: 15px;
    margin-top: 1px;
  }
  .tf-buttons { display: flex; gap: 10px; }
  .tf-btn {
    flex: 1;
    padding: 7px 12px;
    border: 1.5px solid rgba(139,105,20,0.3);
    border-radius: 5px;
    background: rgba(255,255,255,0.5);
    cursor: pointer;
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    font-size: 13px;
    letter-spacing: 1px;
    color: var(--ink-light);
    transition: all 0.2s;
    text-align: center;
  }
  .tf-btn:hover { background: rgba(201,168,76,0.15); border-color: var(--gold-dark); }
  .tf-btn.selected-true { background: linear-gradient(135deg, rgba(45,106,79,0.2), rgba(45,106,79,0.1)); border-color: var(--green-ok); color: var(--green-ok); }
  .tf-btn.selected-false { background: linear-gradient(135deg, rgba(139,26,26,0.15), rgba(139,26,26,0.05)); border-color: var(--red-seal); color: var(--red-seal); }
  .tf-btn.reveal-correct { background: rgba(45,106,79,0.2); border-color: var(--green-ok); color: var(--green-ok); }
  .tf-btn.reveal-wrong { background: rgba(139,26,26,0.15); border-color: var(--red-seal); color: var(--red-seal); text-decoration: line-through; }

  .progress-bar-outer { background: rgba(201,168,76,0.1); border-radius: 10px; height: 6px; margin: 20px 0 24px; overflow: hidden; }
  .progress-bar-inner { height: 100%; background: linear-gradient(90deg, var(--gold-dark), var(--gold)); border-radius: 10px; transition: width 0.4s ease; width: 0%; }
  .progress-text { font-family: 'IM Fell English', serif; font-style: italic; color: rgba(201,168,76,0.5); font-size: 13px; text-align: center; margin-bottom: 6px; }

  .submit-section {
    text-align: center;
    margin-top: 40px;
    padding: 30px;
    background: linear-gradient(135deg, rgba(245,239,224,0.05), rgba(201,168,76,0.03));
    border: 1px solid rgba(201,168,76,0.2);
    border-radius: 12px;
  }
  .submit-section p { font-family: 'IM Fell English', serif; font-style: italic; color: rgba(201,168,76,0.6); margin-bottom: 20px; font-size: 15px; line-height: 1.7; }
  .submit-btn-main {
    background: linear-gradient(135deg, var(--red-seal), #6b0f0f);
    color: var(--gold-light);
    border: 1px solid var(--gold-dark);
    padding: 14px 40px;
    border-radius: 6px;
    cursor: pointer;
    font-family: 'Playfair Display', serif;
    font-size: 17px;
    font-weight: 700;
    letter-spacing: 2px;
    transition: all 0.3s;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4);
    text-transform: uppercase;
    margin: 0 10px;
  }
  .submit-btn-main:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(139,26,26,0.5); }
  .reset-btn {
    background: transparent;
    color: rgba(201,168,76,0.5);
    border: 1px solid rgba(201,168,76,0.25);
    padding: 14px 28px;
    border-radius: 6px;
    cursor: pointer;
    font-family: 'Playfair Display', serif;
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 2px;
    transition: all 0.3s;
    text-transform: uppercase;
    margin: 0 10px;
  }
  .reset-btn:hover { border-color: var(--gold-dark); color: var(--gold); }

  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    z-index: 1000;
    background: rgba(10,6,0,0.85);
    backdrop-filter: blur(6px);
    align-items: center;
    justify-content: center;
  }
  .modal-overlay.active { display: flex; animation: fade-in 0.4s ease; }
  @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
  .modal-box {
    background: linear-gradient(160deg, #1e1204, #0f0a03);
    border: 1px solid var(--gold-dark);
    border-radius: 16px;
    max-width: 600px;
    width: 92%;
    padding: 40px 36px;
    box-shadow: 0 0 80px rgba(201,168,76,0.2), 0 20px 60px rgba(0,0,0,0.7);
    text-align: center;
    position: relative;
    overflow: hidden;
    animation: slide-up 0.5s cubic-bezier(0.16,1,0.3,1);
  }
  @keyframes slide-up { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
  .modal-box::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), var(--gold-light), var(--gold), transparent);
  }
  .modal-seal {
    width: 80px; height: 80px;
    margin: 0 auto 20px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 36px;
  }
  .modal-seal.pass { background: radial-gradient(circle, rgba(45,106,79,0.3), rgba(45,106,79,0.1)); border: 2px solid var(--green-ok); }
  .modal-seal.fail { background: radial-gradient(circle, rgba(139,26,26,0.3), rgba(139,26,26,0.1)); border: 2px solid var(--red-seal); }
  .modal-seal.mid { background: radial-gradient(circle, rgba(201,168,76,0.3), rgba(201,168,76,0.1)); border: 2px solid var(--gold); }
  .modal-title { font-family: 'Playfair Display', serif; font-size: 28px; font-weight: 900; color: var(--gold-light); margin-bottom: 8px; letter-spacing: 1px; }
  .modal-subtitle { font-family: 'IM Fell English', serif; font-style: italic; color: rgba(201,168,76,0.5); font-size: 14px; letter-spacing: 2px; margin-bottom: 28px; }
  .score-display { background: rgba(201,168,76,0.05); border: 1px solid rgba(201,168,76,0.2); border-radius: 10px; padding: 20px; margin-bottom: 24px; }
  .score-big { font-family: 'Playfair Display', serif; font-size: 58px; font-weight: 900; color: var(--gold-light); line-height: 1; text-shadow: 0 0 30px rgba(201,168,76,0.4); }
  .score-out-of { font-family: 'Crimson Text', serif; color: rgba(201,168,76,0.5); font-size: 18px; margin-top: 4px; }
  .score-details { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 16px; }
  .score-detail-item { background: rgba(255,255,255,0.03); border-radius: 6px; padding: 10px; border: 1px solid rgba(201,168,76,0.1); }
  .score-detail-item .label { font-family: 'IM Fell English', serif; font-style: italic; color: rgba(201,168,76,0.4); font-size: 12px; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 4px; }
  .score-detail-item .value { font-family: 'Playfair Display', serif; font-size: 20px; font-weight: 700; color: var(--gold); }
  .modal-message { font-family: 'Crimson Text', serif; font-size: 16px; color: rgba(201,168,76,0.7); line-height: 1.7; margin-bottom: 28px; font-style: italic; }
  .modal-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; }
  .modal-btn { padding: 12px 24px; border-radius: 6px; cursor: pointer; font-family: 'Playfair Display', serif; font-weight: 700; font-size: 14px; letter-spacing: 1px; transition: all 0.3s; text-transform: uppercase; }
  .modal-btn-primary { background: linear-gradient(135deg, var(--green-ok), #1a4a33); color: #a8d5b9; border: 1px solid rgba(45,106,79,0.5); }
  .modal-btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(45,106,79,0.3); }
  .modal-btn-secondary { background: transparent; color: rgba(201,168,76,0.6); border: 1px solid rgba(201,168,76,0.25); }
  .modal-btn-secondary:hover { border-color: var(--gold-dark); color: var(--gold); }

  .q-card.result-correct { border-color: rgba(45,106,79,0.5); }
  .q-card.result-wrong { border-color: rgba(139,26,26,0.5); }
  .answer-reveal { margin-top: 12px; padding: 10px 14px; border-radius: 6px; font-size: 14px; font-family: 'Crimson Text', serif; display: none; }
  .answer-reveal.show { display: block; }
  .answer-reveal.correct { background: rgba(45,106,79,0.1); border: 1px solid rgba(45,106,79,0.3); color: var(--green-ok); }
  .answer-reveal.wrong { background: rgba(139,26,26,0.08); border: 1px solid rgba(139,26,26,0.25); color: var(--red-seal); }
  .answer-reveal strong { font-weight: 600; }

  .shuffle-notice { font-family: 'IM Fell English', serif; font-style: italic; color: rgba(201,168,76,0.4); font-size: 13px; text-align: center; margin-bottom: 16px; }

  .timeup-banner { display: none; background: linear-gradient(135deg, var(--red-seal), #6b0f0f); border: 1px solid var(--gold-dark); border-radius: 8px; padding: 16px 24px; text-align: center; margin-bottom: 20px; }
  .timeup-banner.show { display: block; animation: shake 0.5s ease; }
  @keyframes shake { 0%,100%{transform:translateX(0)} 20%{transform:translateX(-8px)} 40%{transform:translateX(8px)} 60%{transform:translateX(-5px)} 80%{transform:translateX(5px)} }
  .timeup-banner p { color: var(--gold-light); font-family: 'Playfair Display', serif; font-size: 16px; font-weight: 700; letter-spacing: 2px; }

  @media (max-width: 600px) {
    .timer-bar { flex-wrap: wrap; gap: 10px; }
    .timer-progress { width: 100%; order: 3; margin: 0; }
    .modal-box { padding: 28px 20px; }
    .score-big { font-size: 46px; }
    .score-details { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<header class="site-header">
  <div class="subtitle">B√†i Ki·ªÉm Tra Tr·∫Øc Nghi·ªám</div>
  <h1>L·ªäCH S·ª¨ <span>VI·ªÜT NAM</span></h1>
  <div class="ornament">‚ú¶ ‚ú¶ ‚ú¶</div>
  <div class="header-meta">
    <span>üìú ƒê·ªÅ S·ªë 16</span>
    <span>‚è± Th·ªùi gian: 45 ph√∫t</span>
    <span>üìù 28 c√¢u h·ªèi</span>
  </div>
</header>

<div class="timer-bar">
  <div class="timer-display">
    <div class="timer-icon">‚è≥</div>
    <div>
      <div id="timer-text">45:00</div>
      <div class="timer-label">Th·ªùi gian c√≤n l·∫°i</div>
    </div>
  </div>
  <div class="timer-progress">
    <div class="timer-fill" id="timer-fill"></div>
  </div>
  <button class="submit-btn-top" onclick="confirmSubmit()">N·ªôp B√†i</button>
</div>

<div class="main-container">
  <div class="timeup-banner" id="timeup-banner">
    <p>‚öî H·∫æT TH·ªúI GIAN ‚Äî B√†i ƒë√£ ƒë∆∞·ª£c t·ª± ƒë·ªông n·ªôp ‚öî</p>
  </div>

  <div class="section-header">
    <div class="section-title">‚ú¶ Ph·∫ßn I ‚Äî Tr·∫Øc Nghi·ªám M·ªôt Ph∆∞∆°ng √Ån ‚ú¶</div>
  </div>
  <div class="section-desc">
    <p>Th√≠ sinh tr·∫£ l·ªùi c√¢u h·ªèi t·ª´ 1 ƒë·∫øn 24. M·ªói c√¢u h·ªèi th√≠ sinh ch·ªâ ch·ªçn <strong>m·ªôt</strong> ph∆∞∆°ng √°n ƒë√∫ng. (0.25 ƒëi·ªÉm / c√¢u)</p>
  </div>

  <div class="progress-text" id="progress-text">ƒê√£ tr·∫£ l·ªùi: 0 / 24 c√¢u (Ph·∫ßn I)</div>
  <div class="progress-bar-outer"><div class="progress-bar-inner" id="progress-bar1"></div></div>

  <div id="part1-container"></div>

  <div class="section-header" style="margin-top:50px;">
    <div class="section-title">‚ú¶ Ph·∫ßn II ‚Äî ƒê√∫ng / Sai ‚ú¶</div>
  </div>
  <div class="section-desc">
    <p>Th√≠ sinh tr·∫£ l·ªùi c√¢u h·ªèi t·ª´ 1 ƒë·∫øn 4. Trong m·ªói √Ω a), b), c), d) ·ªü m·ªói c√¢u, th√≠ sinh ch·ªçn <strong>ƒê√∫ng</strong> ho·∫∑c <strong>Sai</strong>. (ƒê√∫ng 1 √Ω: 0.1ƒë | 2 √Ω: 0.25ƒë | 3 √Ω: 0.5ƒë | 4 √Ω: 1.0ƒë)</p>
  </div>

  <div id="part2-container"></div>

  <div class="submit-section">
    <p>Ki·ªÉm tra l·∫°i b√†i l√†m tr∆∞·ªõc khi n·ªôp.<br>Sau khi n·ªôp, b·∫°n s·∫Ω th·∫•y ƒë√°p √°n chi ti·∫øt v√† ƒëi·ªÉm s·ªë.</p>
    <button class="submit-btn-main" onclick="confirmSubmit()">‚öî N·ªôp B√†i ‚öî</button>
    <button class="reset-btn" onclick="resetQuiz()">‚Ü∫ L√†m L·∫°i</button>
  </div>
</div>

<div class="modal-overlay" id="result-modal">
  <div class="modal-box">
    <div class="modal-seal" id="modal-seal">üèÖ</div>
    <div class="modal-title" id="modal-title">K·∫øt Qu·∫£</div>
    <div class="modal-subtitle" id="modal-subtitle">Ho√†n th√†nh b√†i ki·ªÉm tra</div>
    <div class="score-display">
      <div class="score-big" id="score-big">0.0</div>
      <div class="score-out-of">/ 10.0 ƒëi·ªÉm</div>
      <div class="score-details">
        <div class="score-detail-item">
          <div class="label">Ph·∫ßn I</div>
          <div class="value" id="score-p1">0/24</div>
        </div>
        <div class="score-detail-item">
          <div class="label">Ph·∫ßn II</div>
          <div class="value" id="score-p2">0/4</div>
        </div>
        <div class="score-detail-item">
          <div class="label">Th·ªùi gian ƒë√£ d√πng</div>
          <div class="value" id="score-time">--</div>
        </div>
        <div class="score-detail-item">
          <div class="label">T·ªâ l·ªá ƒë√∫ng</div>
          <div class="value" id="score-pct">0%</div>
        </div>
      </div>
    </div>
    <div class="modal-message" id="modal-message"></div>
    <div class="modal-actions">
      <button class="modal-btn modal-btn-primary" onclick="closeModal()">üìñ Xem ƒê√°p √Ån</button>
      <button class="modal-btn modal-btn-secondary" onclick="resetQuiz()">‚Ü∫ L√†m L·∫°i</button>
    </div>
  </div>
</div>

<script>
const TOTAL_TIME = 45 * 60;
let timeLeft = TOTAL_TIME;
let timerInterval = null;
let submitted = false;

const part1Questions = [
  {
    id: 1,
    text: "T·ª´ nƒÉm 2010, GDP c·ªßa Trung Qu·ªëc ƒë·ª©ng v·ªã tr√≠ th·ª© m·∫•y tr√™n th·∫ø gi·ªõi?",
    options: [
      { key: "A", text: "Th·ª© 2." },
      { key: "B", text: "Th·ª© 3." },
      { key: "C", text: "Th·ª© 4." },
      { key: "D", text: "Th·ª© 5." }
    ],
    answer: "A"
  },
  {
    id: 2,
    text: "Nguy√™n nh√¢n n√†o sau ƒë√¢y d·∫´n t·ªõi m·ªôt s·ªë n∆∞·ªõc ·ªü ch√¢u √Å, ƒê√¥ng √Çu, M·ªπ Latinh l·ª±a ch·ªçn con ƒë∆∞·ªùng ƒëi l√™n x√¢y d·ª±ng ch·ªß nghƒ©a x√£ h·ªôi?",
    options: [
      { key: "A", text: "Ch·ªãu h·∫≠u qu·∫£ n·∫∑ng n·ªÅ c·ªßa ch·ªß nghƒ©a th·ª±c d√¢n." },
      { key: "B", text: "ƒê√°p ·ª©ng ƒë∆∞·ª£c y√™u c·∫ßu th·ª±c ti·ªÖn c·ªßa ƒë·∫•t n∆∞·ªõc." },
      { key: "C", text: "S·ª± ch·ªçn l·ª±a b·∫Øt bu·ªôc do b·ªã bao v√¢y, c·∫•m v·∫≠n." },
      { key: "D", text: "ƒê·ªÉ nh·∫≠n ƒë∆∞·ª£c s·ª± vi·ªán tr·ª£ to l·ªõn t·ª´ Li√™n X√¥." }
    ],
    answer: "B"
  },
  {
    id: 3,
    text: "\"L√° c·ªù th√™u s√°u ch·ªØ v√†ng\", \"b√≥p n√°t qu·∫£ cam\" l√† nh·ªØng bi·ªÉu t∆∞·ª£ng v·ªÅ ng∆∞·ªùi anh h√πng n√†o trong l·ªãch s·ª≠ d√¢n t·ªôc Vi·ªát Nam?",
    options: [
      { key: "A", text: "L√Ω Th∆∞·ªùng Ki·ªát." },
      { key: "B", text: "Tr·∫ßn Qu·ªëc To·∫£n." },
      { key: "C", text: "Tr·∫ßn Qu·ªëc Tu·∫•n." },
      { key: "D", text: "H·ªì Nguy√™n Tr·ª´ng." }
    ],
    answer: "B"
  },
  {
    id: 4,
    text: "Th·ªùi k·ª≥ B·∫Øc thu·ªôc, v≈© kh√≠ quan tr·ªçng ƒë·ªÉ nh√¢n d√¢n Vi·ªát Nam ƒë√°nh b·∫°i √¢m m∆∞u ƒë·ªìng ho√° c·ªßa phong ki·∫øn ph∆∞∆°ng B·∫Øc l√† g√¨?",
    options: [
      { key: "A", text: "N·ªÅn kinh t·∫ø n√¥ng nghi·ªáp ph√°t tri·ªÉn." },
      { key: "B", text: "Truy·ªÅn th·ªëng y√™u n∆∞·ªõc c·ªßa ng∆∞·ªùi Vi·ªát." },
      { key: "C", text: "Gi·ªØ ƒë∆∞·ª£c t·∫•t c·∫£ phong t·ª•c t·∫≠p qu√°n." },
      { key: "D", text: "Ti·∫øp thu vƒÉn h√≥a Trung Hoa, ·∫§n ƒê·ªô." }
    ],
    answer: "B"
  },
  {
    id: 5,
    text: "M·ªôt trong nh·ªØng n·ªôi dung c·ªßa m·ª•c ti√™u, h√†nh ƒë·ªông mang t√≠nh to√†n c·∫ßu ƒë·∫øn nƒÉm 2030 c·ªßa Li√™n h·ª£p qu·ªëc l√† g√¨?",
    options: [
      { key: "A", text: "Ch·ªëng th·∫•t n·∫°n nghi·ªáp." },
      { key: "B", text: "Quy·ªÅn t·ª± do ch√≠nh tr·ªã." },
      { key: "C", text: "Ch·ªëng b·∫°o l·ª±c gia ƒë√¨nh." },
      { key: "D", text: "Ch·∫•t l∆∞·ª£ng gi√°o d·ª•c." }
    ],
    answer: "D"
  },
  {
    id: 6,
    text: "Nguy√™n nh√¢n ch·ªß y·∫øu d·∫´n t·ªõi c·ª•c di·ªán hai c·ª±c, hai phe sau Chi·∫øn tranh th·∫ø gi·ªõi th·ª© hai l√† g√¨?",
    options: [
      { key: "A", text: "Do s·ª± ƒë·ªëi l·∫≠p v·ªÅ m·ª•c ti√™u v√† chi·∫øn l∆∞·ª£c gi·ªØa hai c∆∞·ªùng qu·ªëc Li√™n X√¥ v√† Mƒ©." },
      { key: "B", text: "M√¢u thu·∫´n v·ªÅ v·∫•n ƒë·ªÅ th·ªã tr∆∞·ªùng v√† thu·ªôc ƒë·ªãa c·ªßa c√°c n∆∞·ªõc t∆∞ b·∫£n ch·ªß nghƒ©a." },
      { key: "C", text: "Tr·∫≠t t·ª± th·∫ø gi·ªõi c√≥ qu√° nhi·ªÅu m√¢u thu·∫´n c·ªßa c√°c n∆∞·ªõc b·∫°i tr·∫≠n v√† th·∫Øng tr·∫≠n." },
      { key: "D", text: "√Çm m∆∞u ti√™u di·ªát Li√™n X√¥ c·ªßa c√°c n∆∞·ªõc ƒë·∫ø qu·ªëc ƒë·ªÉ ƒë·ªôc chi·∫øm ngu·ªìn d·∫ßu m·ªè." }
    ],
    answer: "A"
  },
  {
    id: 7,
    text: "Trong Chi·∫øn tranh th·∫ø gi·ªõi hai (1939 - 1945) c√°c n∆∞·ªõc ƒê√¥ng D∆∞∆°ng l√† thu·ªôc ƒë·ªãa c·ªßa qu·ªëc gia n√†o sau ƒë√¢y?",
    options: [
      { key: "A", text: "Nh·∫≠t." },
      { key: "B", text: "Anh." },
      { key: "C", text: "Ph√°p." },
      { key: "D", text: "M·ªπ." }
    ],
    answer: "A"
  },
  {
    id: 8,
    text: "Nguy√™n t·∫Øc n√†o sau ƒë√¢y kh√¥ng ƒë∆∞·ª£c x√°c ƒë·ªãnh trong Hi·ªáp ∆∞·ªõc Bali (2-1976) c·ªßa t·ªï ch·ª©c ASEAN?",
    options: [
      { key: "A", text: "Gi·∫£i quy·∫øt tranh ch·∫•p b·∫±ng bi·ªán ph√°p h√≤a b√¨nh." },
      { key: "B", text: "Kh√¥ng can thi·ªáp v√†o c√¥ng vi·ªác n·ªôi b·ªô c·ªßa nhau." },
      { key: "C", text: "ƒê·∫©y m·∫°nh h·ª£p t√°c v·ªÅ qu√¢n s·ª± ·ªü ƒê√¥ng Nam √Å." },
      { key: "D", text: "H·ª£p t√°c ph√°t tri·ªÉn c√≥ hi·ªáu qu·∫£ trong c√°c lƒ©nh v·ª±c." }
    ],
    answer: "C"
  },
  {
    id: 9,
    text: "V·∫•n ƒë·ªÅ bi·ªÉn ƒê√¥ng c√≥ t√°c ƒë·ªông nh∆∞ th·∫ø n√†o ƒë·∫øn s·ª± h·ª£p t√°c v√† ph√°t tri·ªÉn c·ªßa C·ªông ƒë·ªìng ASEAN?",
    options: [
      { key: "A", text: "Th√°ch th·ª©c l·ªõn ƒë·ªëi v·ªõi s·ª± ph√°t tri·ªÉn c·ªßa C·ªông ƒë·ªìng ASEAN." },
      { key: "B", text: "C·∫ßn t·∫≠p h·ª£p s·ª± ƒëo√†n k·∫øt c·ªßa c√°c n∆∞·ªõc ASEAN ƒë·ªÉ gi·∫£i quy·∫øt." },
      { key: "C", text: "Gi√∫p c√°c n∆∞·ªõc ƒê√¥ng Nam √Å tr·ªü th√†nh m·ªôt kh·ªëi th·ªëng nh·∫•t." },
      { key: "D", text: "X√≥a b·ªè nh·ªØng m√¢u thu·∫´n ƒë·ªÉ c√πng nhau h·ª£p t√°c v√† ph√°t tri·ªÉn." }
    ],
    answer: "A"
  },
  {
    id: 10,
    text: "Ng√†y 9-8-1945, qu√¢n ƒë·ªôi Li√™n X√¥ ƒë√£ t·∫•n c√¥ng ƒë·ªëi t∆∞·ª£ng n√†o sau ƒë√¢y?",
    options: [
      { key: "A", text: "Qu√¢n ƒê·ª©c ·ªü B√©c-lin." },
      { key: "B", text: "ƒê·∫°o qu√¢n Quan ƒê√¥ng." },
      { key: "C", text: "Nh·∫≠t ·ªü ƒê√¥ng D∆∞∆°ng." },
      { key: "D", text: "T√†n d∆∞ ph√°t x√≠t ƒê·ª©c." }
    ],
    answer: "B"
  },
  {
    id: 11,
    text: "N·ªôi dung n√†o sau ƒë√¢y l√† ƒë∆∞·ªùng l·ªëi c·ªßa cu·ªôc kh√°ng chi·∫øn ch·ªëng Ph√°p (1945 ‚Äì 1954) ƒë∆∞·ª£c ƒê·∫£ng C·ªông s·∫£n ƒê√¥ng D∆∞∆°ng ƒë·ªÅ ra?",
    options: [
      { key: "A", text: "ƒêo√†n k·∫øt." },
      { key: "B", text: "To√†n ƒê·∫£ng." },
      { key: "C", text: "To√†n di·ªán." },
      { key: "D", text: "To√†n qu·ªëc." }
    ],
    answer: "C"
  },
  {
    id: 12,
    text: "N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng √¢m m∆∞u c·ªßa M·ªπ khi gi·ªØ l·∫°i h∆°n 2 v·∫°n c·ªë v·∫•n ·ªü mi·ªÅn Nam Vi·ªát Nam sau Hi·ªáp ƒë·ªãnh Paris 1973?",
    options: [
      { key: "A", text: "Ti·∫øp t·ª•c Vi·ªát Nam h√≥a chi·∫øn tranh." },
      { key: "B", text: "Kh·∫Øc ph·ª•c h·∫≠u qu·∫£ c·ªßa chi·∫øn tranh." },
      { key: "C", text: "Th·ª´a nh·∫≠n s·ª± th·∫•t b·∫°i ·ªü Vi·ªát Nam." },
      { key: "D", text: "T·ª´ b·ªè chi·∫øn tranh ·ªü ƒê√¥ng D∆∞∆°ng." }
    ],
    answer: "A"
  },
  {
    id: 13,
    text: "Th·ªß ƒëo·∫°n m·ªõi ƒë∆∞·ª£c M·ªπ s·ª≠ d·ª•ng trong chi·∫øn l∆∞·ª£c Vi·ªát Nam h√≥a chi·∫øn tranh (1969-1973) l√†",
    options: [
      { key: "A", text: "tr·ª±c thƒÉng v·∫≠n v√† thi·∫øt xa v·∫≠n." },
      { key: "B", text: "ti·∫øn h√†nh th·ªèa hi·ªáp v·ªõi Li√™n X√¥." },
      { key: "C", text: "x√¢y d·ª±ng nhi·ªÅu ·∫•p chi·∫øn l∆∞·ª£c." },
      { key: "D", text: "ti·∫øn h√†nh ph√° ho·∫°i mi·ªÅn B·∫Øc." }
    ],
    answer: "B"
  },
  {
    id: 14,
    text: "ƒê∆∞·ªùng l·ªëi ƒë·ªïi m·ªõi ·ªü Vi·ªát Nam t·ª´ nƒÉm 1986 kh·∫≥ng ƒë·ªãnh, ƒë·ªïi m·ªõi l√†",
    options: [
      { key: "A", text: "thay ƒë·ªïi quan ni·ªám v·ªÅ ch·ªß nghƒ©a x√£ h·ªôi." },
      { key: "B", text: "kh√¥ng thay ƒë·ªïi m·ª•c ti√™u x√£ h·ªôi ch·ªß nghƒ©a." },
      { key: "C", text: "l·∫•y ch√≠nh tr·ªã, x√£ h·ªôi l√† nhi·ªám v·ª• tr·ªçng t√¢m." },
      { key: "D", text: "t·ª´ng b∆∞·ªõc xo√° b·ªè c∆° ch·∫ø qu·∫£n l√≠ kinh t·∫ø c≈©." }
    ],
    answer: "B"
  },
  {
    id: 15,
    text: "Nguy√™n nh√¢n ch·ªß quan n√†o sau ƒë√¢y th√∫c ƒë·∫©y ƒê·∫£ng C·ªông s·∫£n Vi·ªát Nam ti·∫øn h√†nh s·ª± nghi·ªáp ƒë·ªïi m·ªõi ƒë·∫•t n∆∞·ªõc (t·ª´ nƒÉm 1986)?",
    options: [
      { key: "A", text: "Li√™n X√¥ v√† c√°c n∆∞·ªõc ƒê√¥ng √Çu ƒë√£ tan r√£ m·ªôt c√°ch nhanh ch√≥ng." },
      { key: "B", text: "Xu th·∫ø khu v·ª±c h√≥a ƒë√£ xu·∫•t hi·ªán v√† ng√†y c√†ng di·ªÖn ra m·∫°nh m·∫Ω." },
      { key: "C", text: "Cu·ªôc kh·ªßng ho·∫£ng kinh t·∫ø ‚Äì x√£ h·ªôi ·ªü Vi·ªát Nam tr·ªü n√™n tr·∫ßm tr·ªçng." },
      { key: "D", text: "C√¥ng cu·ªôc c·∫£i c√°ch m·ªü c·ª≠a ·ªü Trung Qu·ªëc ƒë·∫°t nhi·ªÅu th√†nh t·ª±u l·ªõn." }
    ],
    answer: "C"
  },
  {
    id: 16,
    text: "NƒÉm 1950, qu·ªëc gia x√£ h·ªôi ch·ªß nghƒ©a ƒë·∫ßu ti√™n tr√™n th·∫ø gi·ªõi thi·∫øt l·∫≠p quan h·ªá ngo·∫°i giao v·ªõi Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a l√†",
    options: [
      { key: "A", text: "Li√™n X√¥." },
      { key: "B", text: "Trung Qu·ªëc." },
      { key: "C", text: "Tri·ªÅu Ti√™n." },
      { key: "D", text: "Ti·ªáp Kh·∫Øc." }
    ],
    answer: "B"
  },
  {
    id: 17,
    text: "Trong Chi·∫øn tranh th·∫ø gi·ªõi th·ª© hai, ƒê·∫£ng C·ªông s·∫£n ƒê√¥ng D∆∞∆°ng ƒë√£ ·ªßng h·ªô l·ª±c l∆∞·ª£ng n√†o sau ƒë√¢y?",
    options: [
      { key: "A", text: "Kh·ªëi Hi·ªáp ∆∞·ªõc." },
      { key: "B", text: "Phe ƒê·ªìng minh." },
      { key: "C", text: "Kh·ªëi Li√™n minh." },
      { key: "D", text: "C√°c n∆∞·ªõc ƒê√¥ng √Çu." }
    ],
    answer: "B"
  },
  {
    id: 18,
    text: "N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh ƒë√∫ng k·∫øt qu·∫£ m√† c√°ch m·∫°ng Vi·ªát Nam ƒë·∫°t ƒë∆∞·ª£c khi k√Ω Hi·ªáp ƒë·ªãnh Gi∆°-ne-v∆° nƒÉm 1954?",
    options: [
      { key: "A", text: "Th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc." },
      { key: "B", text: "Mi·ªÅn B·∫Øc gi·∫£i ph√≥ng." },
      { key: "C", text: "Mi·ªÅn Nam gi·∫£i ph√≥ng." },
      { key: "D", text: "ƒê√°nh b·∫°i ƒë·∫ø qu·ªëc M·ªπ." }
    ],
    answer: "B"
  },
  {
    id: 19,
    text: "N·ªôi dung n√†o sau ƒë√¢y ph·∫£n √°nh kh√¥ng ƒë√∫ng v·ªÅ y·∫øu t·ªë qu√™ h∆∞∆°ng, gia ƒë√¨nh ·∫£nh h∆∞·ªüng ƒë·∫øn cu·ªôc ƒë·ªùi, s·ª± nghi·ªáp c√°ch m·∫°ng c·ªßa H·ªì Ch√≠ Minh?",
    options: [
      { key: "A", text: "C√°c t√¢n th∆∞, t√¢n b√°o v√† t∆∞ t∆∞·ªüng m·ªõi du nh·∫≠p." },
      { key: "B", text: "Truy·ªÅn th·ªëng y√™u n∆∞·ªõc c·ªßa qu√™ h∆∞∆°ng Ngh·ªá An." },
      { key: "C", text: "S·ª± gi√°o d·ª•c chu·∫©n m·ª±c c·ªßa th√¢n ph·ª• v√† th√¢n m·∫´u." },
      { key: "D", text: "Truy·ªÅn th·ªëng hi·∫øu h·ªçc, khoa b·∫£ng ·ªü ƒë·∫•t Nam ƒê√†n." }
    ],
    answer: "A"
  },
  {
    id: 20,
    text: "Nh·ªØng ho·∫°t ƒë·ªông ƒë·ªëi ngo·∫°i c·ªßa Ch·ªß t·ªãch H·ªì Ch√≠ Minh trong giai ƒëo·∫°n 1945 ‚Äì 1969 kh√¥ng c√≥ t√°c d·ª•ng n√†o sau ƒë√¢y ƒë·ªëi v·ªõi cu·ªôc kh√°ng chi·∫øn ch·ªëng Ph√°p v√† ch·ªëng M·ªπ?",
    options: [
      { key: "A", text: "Nh·∫≠n ƒë∆∞·ª£c vi·ªán tr·ª£ l·ªõn t·ª´ Li√™n X√¥, Trung Qu·ªëc." },
      { key: "B", text: "Tranh th·ªß s·ª± ƒë·ªìng t√¨nh, ·ªßng h·ªô c·ªßa b·∫°n b√® qu·ªëc t·∫ø." },
      { key: "C", text: "C·ªßng c·ªë v√† duy tr√¨ kh·ªëi ƒë·∫°i ƒëo√†n k·∫øt to√†n d√¢n t·ªôc." },
      { key: "D", text: "Th·ªÉ hi·ªán l·∫≠p tr∆∞·ªùng ch√≠nh nghƒ©a c·ªßa kh√°ng chi·∫øn." }
    ],
    answer: "C"
  },
  {
    id: 21,
    text: "Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªÅ ch·ªß tr∆∞∆°ng ti·∫øn h√†nh c√°c ho·∫°t ƒë·ªông ngo·∫°i giao c·ªßa Ch·ªß t·ªãch H·ªì Ch√≠ Minh trong giai ƒëo·∫°n 1945 - 1969?",
    options: [
      { key: "A", text: "Ngo·∫°i giao ph·∫£i d·ª±a v√†o n·ªôi l·ª±c v√† tranh th·ªß ngo·∫°i l·ª±c, ph√°t huy t√≠nh ch√≠nh nghƒ©a." },
      { key: "B", text: "Ngo·∫°i giao ph·∫£i l·∫•y qu√¢n s·ª± l√†m n·ªÅn t·∫£ng, x√¢y d·ª±ng s·ª©c m·∫°nh qu√¢n s·ª± ƒë·ªÉ rƒÉn ƒëe." },
      { key: "C", text: "Ngo·∫°i giao ch·ªâ m·ªü ·ªü giai ƒëo·∫°n cu·ªëi c·ªßa cu·ªôc kh√°ng chi·∫øn ƒë·ªÉ ti·∫øt ki·ªám x∆∞∆°ng m√°u." },
      { key: "D", text: "Ngo·∫°i giao c·∫ßn d·ª±a v√†o s·ª± ·ªßng h·ªô c·ªßa kh·ªëi x√£ h·ªôi ch·ªß nghƒ©a, Li√™n X√¥, Trung Qu·ªëc." }
    ],
    answer: "A"
  },
  {
    id: 22,
    text: "Nh·∫≠n ƒë·ªãnh n√†o sau ƒë√¢y l√† ƒë√∫ng v·ªÅ th√†nh t·ª±u c·ªßa c√¥ng cu·ªôc ƒë·ªïi m·ªõi ƒë·∫•t n∆∞·ªõc Vi·ªát Nam ƒë∆∞·ª£c ti·∫øn h√†nh t·ª´ nƒÉm 1986?",
    options: [
      { key: "A", text: "Vi·ªát Nam ƒë√£ nhanh ch√≥ng tr·ªü th√†nh m·ªôt n∆∞·ªõc ph√°t tri·ªÉn." },
      { key: "B", text: "Vi·ªát Nam ƒë√£ kh·∫≥ng ƒë·ªãnh ƒë∆∞·ª£c v·ªã th·∫ø ƒë·ª©ng ƒë·∫ßu ·ªü Ch√¢u √Å." },
      { key: "C", text: "Vi·ªát Nam ƒë√£ tho√°t ngh√®o, tr·ªü th√†nh n∆∞·ªõc c√¥ng nghi·ªáp m·ªõi." },
      { key: "D", text: "Vi·ªát Nam c√≥ s·ª± ph√°t tri·ªÉn nhanh ch√≥ng trong c√¥ng cu·ªôc ƒê·ªïi m·ªõi." }
    ],
    answer: "D"
  },
  {
    id: 23,
    text: "T·ª´ nh·ªØng th·∫Øng l·ª£i c·ªßa C√°ch m·∫°ng Vi·ªát Nam trong kh√°ng chi·∫øn ch·ªëng Ph√°p v√† ch·ªëng Mƒ©, b√†i h·ªçc kinh nghi·ªám quan tr·ªçng nh·∫•t cho c√¥ng cu·ªôc x√¢y d·ª±ng v√† b·∫£o v·ªá t·ªï qu·ªëc hi·ªán nay l√†",
    options: [
      { key: "A", text: "s·ª± l√£nh ƒë·∫°o c·ªßa ƒê·∫£ng l√† nh√¢n t·ªë h√†ng ƒë·∫ßu quy·∫øt ƒë·ªãnh th·∫Øng l·ª£i c·ªßa c√°ch m·∫°ng Vi·ªát Nam." },
      { key: "B", text: "th·ª±c hi·ªán hai nhi·ªám v·ª• tr·ªçng t√¢m l√† kh√°ng chi·∫øn v√† ki·∫øn qu·ªëc lu√¥n song song v·ªõi nhau." },
      { key: "C", text: "ƒë·∫∑t l·ª±c l∆∞·ª£ng v≈© trang trong t√¨nh tr·∫°ng s·∫µn s√†ng chi·∫øn ƒë·∫•u ch·ªëng x√¢m l∆∞·ª£c t·ª´ b√™n ngo√†i." },
      { key: "D", text: "tƒÉng c∆∞·ªùng quan h·ªá ngo·∫°i giao v·ªõi c√°c n∆∞·ªõc ƒê√¥ng √Çu ƒë·ªÉ tranh th·ªß s·ª± ·ªßng h·ªô c·ªßa qu·ªëc t·∫ø." }
    ],
    answer: "A"
  },
  {
    id: 24,
    text: "B√†i h·ªçc sau ƒë√¢y ƒë∆∞·ª£c r√∫t ra t·ª´ s·ª± th√†nh c√¥ng c·ªßa c√°c n∆∞·ªõc c√¥ng nghi·ªáp m·ªõi m√† Vi·ªát Nam c√≥ th·ªÉ √°p d·ª•ng ƒë·ªÉ h·ªôi nh·∫≠p th√†nh c√¥ng v·ªõi th·∫ø gi·ªõi?",
    options: [
      { key: "A", text: "X√¢y d·ª±ng kinh t·∫ø h∆∞·ªõng ngo·∫°i, ch√∫ tr·ªçng xu·∫•t kh·∫©u." },
      { key: "B", text: "Li√™n k·∫øt, h·ª£p t√°c ch·∫∑t ch·∫Ω v·ªõi c√°c n∆∞·ªõc ph√°t tri·ªÉn." },
      { key: "C", text: "T√¨m ki·∫øm nh·ªØng ngu·ªìn nhi√™n - nguy√™n li·ªáu m·ªõi." },
      { key: "D", text: "Tham gia c√°c c∆° quan chuy√™n m√¥n c·ªßa Li√™n h·ª£p qu·ªëc." }
    ],
    answer: "A"
  }
];

const part2Questions = [
  {
    id: 1,
    intro: "Cho nh·ªØng th√¥ng tin trong b·∫£ng sau ƒë√¢y:",
    tableData: {
      headers: ["Th·ªùi gian", "N·ªôi dung"],
      rows: [
        ["NƒÉm 1960", "ƒê·ªìng kh·ªüi th·∫Øng l·ª£i, ƒë√°nh b·∫°i chi·∫øn tranh ƒë∆°n ph∆∞∆°ng c·ªßa M·ªπ."],
        ["NƒÉm 1964", "Chi·∫øn th·∫Øng B√¨nh Gi√£, l√†m ph√° s·∫£n c∆° b·∫£n chi·∫øn tranh ƒë·∫∑c bi·ªát c·ªßa M·ªπ."],
        ["NƒÉm 1968", "Th·∫Øng l·ª£i M·∫≠u Th√¢n, ƒë√°nh b·∫°i chi·∫øn tranh c·ª•c b·ªô c·ªßa M·ªπ."],
        ["NƒÉm 1972", "Cu·ªôc ti·∫øn c√¥ng chi·∫øn l∆∞·ª£c th·∫Øng l·ª£i, l√†m ph√° s·∫£n c∆° b·∫£n Vi·ªát Nam h√≥a chi·∫øn tranh c·ªßa M·ªπ."],
        ["NƒÉm 1975", "Th·∫Øng l·ª£i c·ªßa cu·ªôc T·ªïng ti·∫øn c√¥ng v√† n·ªïi d·∫≠y m√πa xu√¢n 1975, th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc."]
      ]
    },
    items: [
      { key: "a", text: "T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn nh·ªØng th·∫Øng l·ª£i ti√™u bi·ªÉu tr√™n m·∫∑t tr·∫≠n qu√¢n s·ª± trong cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ c·ªßa nh√¢n d√¢n Vi·ªát Nam.", answer: true },
      { key: "b", text: "M·ªói th·∫Øng l·ª£i tr√™n m·∫∑t tr·∫≠n qu√¢n s·ª± trong b·∫£ng t∆∞ li·ªáu tr√™n ƒë·ªÅu g√≥p ph·∫ßn t·∫°o ƒëi·ªÅu ki·ªán cho th·∫Øng l·ª£i tr√™n m·∫∑t tr·∫≠n ngo·∫°i giao.", answer: false },
      { key: "c", text: "Chi·∫øn th·∫Øng M·∫≠u Th√¢n 1968 ƒë√£ m·ªü ra c·ª•c di·ªán v·ª´a ƒë√°nh v·ª´a ƒë√†m trong cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ c·ªßa nh√¢n d√¢n Vi·ªát Nam.", answer: true },
      { key: "d", text: "Nh·ªØng th·∫Øng l·ª£i tr√™n m·∫∑t tr·∫≠n qu√¢n s·ª± c√≥ t√°c ƒë·ªông quy·∫øt ƒë·ªãnh ƒë·ªëi v·ªõi th·∫Øng l·ª£i c·ªßa cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ c·ª©u n∆∞·ªõc.", answer: true }
    ]
  },
  {
    id: 2,
    intro: "Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:",
    passage: "Qu√° tr√¨nh x√¢y d·ª±ng kh·ªëi ƒëo√†n k·∫øt to√†n d√¢n t·ªôc, kh√¥ng t√°ch r·ªùi vi·ªác c·ªßng c·ªë v√† ph√°t tri·ªÉn c√°c t·ªï ch·ª©c ch√≠nh tr·ªã, x√£ h·ªôi. Tr√™n tinh th·∫ßn Ngh·ªã quy·∫øt c·ªßa ƒê·∫°i h·ªôi ƒê·∫£ng l·∫ßn th·ª© VI, h√†ng lo·∫°t Ngh·ªã quy·∫øt ƒë√£ ƒë∆∞·ª£c ban h√†nh nh·∫±m th√∫c ƒë·∫©y x√¢y d·ª±ng kh·ªëi ƒëo√†n k·∫øt to√†n d√¢n t·ªôc, nh∆∞ Ngh·ªã quy·∫øt ng√†y 3-2-1990 v·ªÅ vi·ªác th√†nh l·∫≠p H·ªôi C·ª±u chi·∫øn binh Vi·ªát Nam; Th√¥ng tri c·ªßa Ban B√≠ th∆∞ c√πng ng√†y v·ªÅ vi·ªác t·ªï ch·ª©c g√≥p √Ω ki·∫øn v√†o vƒÉn ki·ªán H·ªôi ngh·ªã Ban Ch·∫•p h√†nh Trung ∆∞∆°ng ƒê·∫£ng l·∫ßn th·ª© 8 v·ªÅ c√¥ng t√°c d√¢n v·∫≠n; Ngh·ªã quy·∫øt H·ªôi ngh·ªã Ban Ch·∫•p h√†nh Trung ∆∞∆°ng ƒê·∫£ng l·∫ßn th·ª© 8 (27-3-1990) v·ªÅ ƒë·ªïi m·ªõi c√¥ng t√°c qu·∫ßn ch√∫ng c·ªßa ƒê·∫£ng..",
    passageSource: "Nguy·ªÖn Ng·ªçc M√£o (Ch·ªß bi√™n), L·ªãch s·ª≠ Vi·ªát Nam, t·∫≠p 15, NXB. Khoa h·ªçc x√£ h·ªôi 2017, tr. 86",
    items: [
      { key: "a", text: "T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn quan ƒëi·ªÉm x√¢y d·ª±ng, c·ªßng c·ªë, ph√°t tri·ªÉn kh·ªëi ƒë·∫°i ƒëo√†n k·∫øt d√¢n t·ªôc trong c√¥ng cu·ªôc ƒë·ªïi m·ªõi ·ªü Vi·ªát Nam.", answer: true },
      { key: "b", text: "Trong c√¥ng cu·ªôc ƒë·ªïi m·ªõi ƒë·∫•t n∆∞·ªõc, kh·ªëi ƒë·∫°i ƒëo√†n k·∫øt d√¢n t·ªôc ƒë√£ ƒë∆∞·ª£c h√¨nh th√†nh th√¥ng qua x√¢y d·ª±ng m·∫∑t tr·∫≠n d√¢n t·ªôc.", answer: false },
      { key: "c", text: "Vi·ªác x√¢y d·ª±ng c√°c t·ªï ch·ª©c ch√≠nh tr·ªã, x√£ h·ªôi, t·ªï ch·ª©c qu·∫ßn ch√∫ng nh·∫±m th√∫c ƒë·∫©y x√¢y d·ª±ng kh·ªëi ƒë·∫°i ƒëo√†n k·∫øt d√¢n t·ªôc.", answer: true },
      { key: "d", text: "Hi·ªán nay, kh·ªëi ƒë·∫°i ƒëo√†n k·∫øt d√¢n t·ªôc v·∫´n ƒë∆∞·ª£c ph√°t huy cao ƒë·ªô trong ƒë·∫•u tranh gi·∫£i ph√≥ng d√¢n t·ªôc v√† b·∫£o v·ªá t·ªï qu·ªëc.", answer: false }
    ]
  },
  {
    id: 3,
    intro: "Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:",
    passage: "Ng√†y 2-1-1950, Ch·ªß t·ªãch H·ªì Ch√≠ Minh ƒëi Trung Qu·ªëc, ng√†y 14-1-1950 Ch·ªß t·ªãch H·ªì Ch√≠ Minh tuy√™n b·ªë s·∫µn s√†ng thi·∫øt l·∫≠p quan h·ªá ngo·∫°i giao v·ªõi c√°c n∆∞·ªõc tr√™n th·∫ø gi·ªõi v√† kh·∫≥ng ƒë·ªãnh \"Ch√≠nh ph·ªß Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a l√† ch√≠nh ph·ªß h·ª£p ph√°p duy nh·∫•t c·ªßa to√†n th·ªÉ nh√¢n d√¢n Vi·ªát Nam. CƒÉn c·ª© tr√™n quy·ªÅn l·ª£i chung, Ch√≠nh ph·ªß Vi·ªát Nam d√¢n ch·ªß c·ªông h√≤a s·∫µn sang ƒë·∫∑t quan h·ªá ngo·∫°i giao v·ªõi ch√≠nh ph·ªß n∆∞·ªõc n√†o t√¥n tr·ªçng quy·ªÅn b√¨nh ƒë·∫≥ng, ch·ªß quy·ªÅn l√£nh th·ªï v√† ch·ªß quy·ªÅn qu·ªëc gia c·ªßa n∆∞·ªõc Vi·ªát Nam ƒë·ªÉ c√πng nhau b·∫£o v·ªá h√≤a b√¨nh v√† x√¢y ƒë·∫Øp n·ªÅn d√¢n ch·ªß th·∫ø gi·ªõi\".",
    passageSource: "Ph·∫°m ƒê·ª©c Thu·∫≠n: Gi√°o tr√¨nh L·ªãch s·ª≠ ngo·∫°i giao Vi·ªát Nam, NXB ƒê·∫°i h·ªçc C·∫ßn Th∆°, 2018, tr 117",
    items: [
      { key: "a", text: "T∆∞ li·ªáu ƒë·ªÅ c·∫≠p ƒë·∫øn ch√≠nh s√°ch v√† quan ƒëi·ªÉm ngo·∫°i giao c·ªßa Vi·ªát Nam trong cu·ªôc kh√°ng chi·∫øn ch·ªëng M·ªπ.", answer: false },
      { key: "b", text: "T·ª´ nƒÉm 1950, Vi·ªát Nam D√¢n ch·ªß c·ªông h√≤a ƒë√£ ƒë∆∞·ª£c nhi·ªÅu n∆∞·ªõc c√¥ng nh·∫≠n v√† ƒë·∫∑t quan h·ªá ngo·∫°i giao.", answer: true },
      { key: "c", text: "Quan ƒëi·ªÉm c·ªßa ngo·∫°i giao Vi·ªát Nam l√† h√≤a b√¨nh, t√¥n tr·ªçng c√°c quy·ªÅn d√¢n t·ªôc c∆° b·∫£n c·ªßa c√°c qu·ªëc gia.", answer: true },
      { key: "d", text: "Ngo·∫°i giao trong kh√°ng chi·∫øn ch·ªëng Ph√°p v√† ch·ªëng M·ªπ ƒë·ªÅu ƒë√≥ng vai tr√≤ quy·∫øt ƒë·ªãnh ƒë∆∞a ƒë·∫øn th·∫Øng l·ª£i cu·ªëi c√πng.", answer: false }
    ]
  },
  {
    id: 4,
    intro: "Cho ƒëo·∫°n t∆∞ li·ªáu sau ƒë√¢y:",
    passage: "Hi·∫øn ch∆∞∆°ng Li√™n H·ª£p Qu·ªëc quy ƒë·ªãnh m·ª•c ƒë√≠ch cao nh·∫•t c·ªßa Li√™n H·ª£p Qu·ªëc l√† nh·∫±m duy tr√¨ h√≤a b√¨nh, an ninh th·∫ø gi·ªõi. ƒê·ªÉ th·ª±c hi·ªán nh·ªØng m·ª•c ƒë√≠ch tr√™n, Hi·∫øn ch∆∞∆°ng quy ƒë·ªãnh Li√™n H·ª£p Qu·ªëc s·∫Ω h√†nh ƒë·ªông d·ª±a theo nh·ªØng nguy√™n t·∫Øc: ch·ªß quy·ªÅn b√¨nh ƒë·∫≥ng gi·ªØa c√°c qu·ªëc gia v√† quy·ªÅn d√¢n t·ªôc t·ª± quy·∫øt; t√¥n tr·ªçng to√†n v·∫πn l√£nh th·ªï v√† ƒë·ªôc l·∫≠p ch√≠nh tr·ªã c·ªßa t·∫•t c·∫£ c√°c n∆∞·ªõc; gi·∫£i quy·∫øt c√°c tranh ch·∫•p qu·ªëc t·∫ø b·∫±ng ph∆∞∆°ng ph√°p ho√† b√¨nh; chung s·ªëng ho√† b√¨nh v√† ƒë·∫£m b·∫£o s·ª± nh·∫•t tr√≠ gi·ªØa 5 c∆∞·ªùng qu·ªëc (Li√™n X√¥, Mƒ©, Anh, Ph√°p, Trung Qu·ªëc); Li√™n H·ª£p Qu·ªëc kh√¥ng can thi·ªáp v√†o c√¥ng vi·ªác n·ªôi b·ªô c·ªßa b·∫•t c·ª© n∆∞·ªõc n√†o.",
    passageSource: "Nguy·ªÖn Anh Th√°i: L·ªãch s·ª≠ th·∫ø gi·ªõi hi·ªán ƒë·∫°i (1917 - 1995), NXB Gi√°o d·ª•c Vi·ªát Nam, H√† N·ªôi, 2006, tr227",
    items: [
      { key: "a", text: "ƒêo·∫°n t∆∞ li·ªáu ph·∫£n √°nh m·ª•c ƒë√≠ch, nguy√™n t·∫Øc ho·∫°t ƒë·ªông c·ªßa t·ªï ch·ª©c Li√™n h·ª£p qu·ªëc.", answer: true },
      { key: "b", text: "M·ª•c ƒë√≠ch ho·∫°t ƒë·ªông c·ªßa Li√™n h·ª£p qu·ªëc l√† ƒë·∫£m b·∫£o s·ª± nh·∫•t tr√≠ gi·ªØa nƒÉm c∆∞·ªùng qu·ªëc.", answer: false },
      { key: "c", text: "Li√™n h·ª£p qu·ªëc l√† t·ªï ch·ª©c qu·ªëc t·∫ø l·ªõn nh·∫•t, gi·ªØ vai tr√≤ duy tr√¨ h√≤a b√¨nh, an ninh qu·ªëc t·∫ø.", answer: true },
      { key: "d", text: "Li√™n h·ª£p qu·ªëc ƒë√£ gi·∫£i quy·∫øt t·ªët m·ªçi tranh ch·∫•p qu·ªëc t·∫ø b·∫±ng ph∆∞∆°ng ph√°p h√≤a b√¨nh.", answer: false }
    ]
  }
];

let p1Answers = {};
let p2Answers = {};
let shuffledP1Indices = [...Array(part1Questions.length).keys()];

function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function renderPart1() {
  shuffleArray(shuffledP1Indices);
  const container = document.getElementById('part1-container');
  container.innerHTML = '';
  shuffledP1Indices.forEach((origIdx, displayIdx) => {
    const q = part1Questions[origIdx];
    const opts = [...q.options];
    shuffleArray(opts);
    const card = document.createElement('div');
    card.className = 'q-card';
    card.id = `p1-card-${q.id}`;
    let optHtml = opts.map(o => `
      <label class="option-label" id="p1-lbl-${q.id}-${o.key}" onclick="selectP1(${q.id}, '${o.key}', this)">
        <input type="radio" name="p1q${q.id}" value="${o.key}">
        <span class="option-key">${o.key}</span>
        <span>${o.text}</span>
      </label>
    `).join('');
    card.innerHTML = `
      <div class="q-number-badge">C√¢u ${displayIdx + 1}</div>
      <div class="q-text">${q.text}</div>
      <div class="options-grid">${optHtml}</div>
      <div class="answer-reveal" id="p1-reveal-${q.id}"></div>
    `;
    container.appendChild(card);
  });
  updateProgress();
}

function renderPart2() {
  const container = document.getElementById('part2-container');
  container.innerHTML = '';
  part2Questions.forEach((q, idx) => {
    const card = document.createElement('div');
    card.className = 'q-card';
    card.id = `p2-card-${q.id}`;
    let introHtml = `<div class="q-text">${q.intro}</div>`;
    let contentHtml = '';
    if (q.tableData) {
      let rows = q.tableData.rows.map(r => `<tr>${r.map(c => `<td>${c}</td>`).join('')}</tr>`).join('');
      let headers = q.tableData.headers.map(h => `<th>${h}</th>`).join('');
      contentHtml = `<table class="q-table"><thead><tr>${headers}</tr></thead><tbody>${rows}</tbody></table>`;
    } else if (q.passage) {
      contentHtml = `<div class="q-passage">${q.passage}<div class="q-passage-source">${q.passageSource}</div></div>`;
    }
    let itemsHtml = q.items.map(item => `
      <div class="tf-item" id="p2-item-${q.id}-${item.key}">
        <div class="tf-statement">
          <span class="tf-key-letter">${item.key})</span>
          <span>${item.text}</span>
        </div>
        <div class="tf-buttons">
          <button class="tf-btn" id="p2-true-${q.id}-${item.key}" onclick="selectP2(${q.id}, '${item.key}', true, this)">‚úì ƒê√öNG</button>
          <button class="tf-btn" id="p2-false-${q.id}-${item.key}" onclick="selectP2(${q.id}, '${item.key}', false, this)">‚úó SAI</button>
        </div>
      </div>
    `).join('');
    card.innerHTML = `
      <div class="q-number-badge">C√¢u ${idx + 1}</div>
      ${introHtml}
      ${contentHtml}
      <div class="tf-options">${itemsHtml}</div>
      <div class="answer-reveal" id="p2-reveal-${q.id}"></div>
    `;
    container.appendChild(card);
  });
}

function selectP1(qId, key, labelEl) {
  if (submitted) return;
  p1Answers[qId] = key;
  const q = part1Questions.find(q => q.id === qId);
  q.options.forEach(o => {
    const lbl = document.getElementById(`p1-lbl-${qId}-${o.key}`);
    if (lbl) lbl.classList.remove('selected');
  });
  labelEl.classList.add('selected');
  document.getElementById(`p1-card-${qId}`).classList.add('answered');
  updateProgress();
}

function selectP2(qId, itemKey, value, btn) {
  if (submitted) return;
  const stateKey = `${qId}_${itemKey}`;
  p2Answers[stateKey] = value;
  const trueBtn = document.getElementById(`p2-true-${qId}-${itemKey}`);
  const falseBtn = document.getElementById(`p2-false-${qId}-${itemKey}`);
  trueBtn.className = 'tf-btn';
  falseBtn.className = 'tf-btn';
  if (value === true) trueBtn.classList.add('selected-true');
  else falseBtn.classList.add('selected-false');
}

function updateProgress() {
  const answered = Object.keys(p1Answers).length;
  document.getElementById('progress-text').textContent = `ƒê√£ tr·∫£ l·ªùi: ${answered} / 24 c√¢u (Ph·∫ßn I)`;
  document.getElementById('progress-bar1').style.width = (answered / 24 * 100) + '%';
}

function startTimer() {
  timerInterval = setInterval(() => {
    timeLeft--;
    const m = Math.floor(timeLeft / 60);
    const s = timeLeft % 60;
    document.getElementById('timer-text').textContent = `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
    document.getElementById('timer-fill').style.width = (timeLeft / TOTAL_TIME * 100) + '%';
    const timerEl = document.getElementById('timer-text');
    const fillEl = document.getElementById('timer-fill');
    if (timeLeft <= 300) { timerEl.className = 'danger'; fillEl.className = 'timer-fill warning'; }
    else if (timeLeft <= 600) { timerEl.className = 'warning'; }
    if (timeLeft <= 0) { clearInterval(timerInterval); autoSubmit(); }
  }, 1000);
}

function autoSubmit() {
  document.getElementById('timeup-banner').classList.add('show');
  window.scrollTo({ top: 0, behavior: 'smooth' });
  setTimeout(() => { doSubmit(); }, 1500);
}

function confirmSubmit() { if (submitted) return; doSubmit(); }

function doSubmit() {
  if (submitted) return;
  submitted = true;
  clearInterval(timerInterval);
  const usedSeconds = TOTAL_TIME - timeLeft;
  const timeUsed = `${Math.floor(usedSeconds/60)}p${String(usedSeconds%60).padStart(2,'0')}s`;

  document.querySelectorAll('.tf-btn, .option-label').forEach(el => { el.style.pointerEvents = 'none'; });

  let p1Correct = 0;
  part1Questions.forEach(q => {
    const userAns = p1Answers[q.id];
    const card = document.getElementById(`p1-card-${q.id}`);
    const reveal = document.getElementById(`p1-reveal-${q.id}`);
    if (userAns === q.answer) {
      p1Correct++;
      const lbl = document.getElementById(`p1-lbl-${q.id}-${userAns}`);
      if (lbl) lbl.classList.add('correct');
      card.classList.add('result-correct');
      reveal.innerHTML = `<strong>‚úì ƒê√∫ng!</strong> ƒê√°p √°n: <strong>${q.answer}</strong>`;
      reveal.className = 'answer-reveal show correct';
    } else {
      card.classList.add('result-wrong');
      if (userAns) { const lw = document.getElementById(`p1-lbl-${q.id}-${userAns}`); if (lw) lw.classList.add('wrong'); }
      const lc = document.getElementById(`p1-lbl-${q.id}-${q.answer}`); if (lc) lc.classList.add('correct');
      reveal.innerHTML = userAns ? `<strong>‚úó Sai.</strong> B·∫°n ch·ªçn <strong>${userAns}</strong> ‚Äî ƒê√°p √°n ƒë√∫ng: <strong>${q.answer}</strong>` : `<strong>‚úó Ch∆∞a tr·∫£ l·ªùi.</strong> ƒê√°p √°n ƒë√∫ng: <strong>${q.answer}</strong>`;
      reveal.className = 'answer-reveal show wrong';
    }
  });

  let p2Total = 0;
  part2Questions.forEach(q => {
    let correctCount = 0;
    q.items.forEach(item => {
      const userVal = p2Answers[`${q.id}_${item.key}`];
      const isCorrect = userVal === item.answer;
      if (isCorrect) correctCount++;
      const trueBtn = document.getElementById(`p2-true-${q.id}-${item.key}`);
      const falseBtn = document.getElementById(`p2-false-${q.id}-${item.key}`);
      trueBtn.className = 'tf-btn'; falseBtn.className = 'tf-btn';
      const correctBtn = item.answer === true ? trueBtn : falseBtn;
      correctBtn.classList.add('reveal-correct');
      if (userVal !== null && userVal !== undefined && !isCorrect) {
        const wrongBtn = item.answer === true ? falseBtn : trueBtn;
        wrongBtn.classList.add('reveal-wrong');
      }
    });
    let qScore = correctCount === 4 ? 1.0 : correctCount === 3 ? 0.5 : correctCount === 2 ? 0.25 : correctCount === 1 ? 0.1 : 0;
    p2Total += qScore;
    const reveal = document.getElementById(`p2-reveal-${q.id}`);
    const msgMap = {4:'‚úì Tuy·ªát v·ªùi! ƒê√∫ng 4/4 √Ω',3:'‚úì Kh√° t·ªët! ƒê√∫ng 3/4 √Ω',2:'ƒê√∫ng 2/4 √Ω',1:'ƒê√∫ng 1/4 √Ω',0:'‚úó Kh√¥ng c√≥ √Ω n√†o ƒë√∫ng'};
    reveal.innerHTML = `<strong>${msgMap[correctCount]}</strong> ‚Äî ${qScore} ƒëi·ªÉm`;
    reveal.className = `answer-reveal show ${correctCount >= 3 ? 'correct' : 'wrong'}`;
  });

  const total = Math.round((p1Correct * 0.25 + p2Total) * 10) / 10;
  showResultModal(p1Correct, p2Total, total, timeUsed);
}

function showResultModal(p1Correct, p2Total, total, timeUsed) {
  const seal = document.getElementById('modal-seal');
  const title = document.getElementById('modal-title');
  const subtitle = document.getElementById('modal-subtitle');
  const msg = document.getElementById('modal-message');
  if (total >= 8) {
    seal.className = 'modal-seal pass'; seal.textContent = 'üèÜ';
    title.textContent = 'Xu·∫•t S·∫Øc!'; subtitle.textContent = 'B√†i ki·ªÉm tra ho√†n th√†nh v·ªõi k·∫øt qu·∫£ r·∫•t t·ªët';
    msg.textContent = 'B·∫°n ƒë√£ th·ªÉ hi·ªán ki·∫øn th·ª©c L·ªãch S·ª≠ v·ªØng ch·∫Øc. Ti·∫øp t·ª•c ph√°t huy tinh th·∫ßn h·ªçc t·∫≠p n√†y nh√©!';
  } else if (total >= 5) {
    seal.className = 'modal-seal mid'; seal.textContent = 'üìú';
    title.textContent = 'Kh√° T·ªët'; subtitle.textContent = 'B√†i ki·ªÉm tra ƒë√£ ho√†n th√†nh';
    msg.textContent = 'K·∫øt qu·∫£ kh·∫£ quan. H√£y xem l·∫°i ƒë√°p √°n ƒë·ªÉ c·ªßng c·ªë nh·ªØng ph·∫ßn c√≤n ch∆∞a v·ªØng.';
  } else {
    seal.className = 'modal-seal fail'; seal.textContent = '‚öî';
    title.textContent = 'C·∫ßn C·ªë G·∫Øng'; subtitle.textContent = 'B√†i ki·ªÉm tra ƒë√£ ho√†n th√†nh';
    msg.textContent = 'ƒê√¢y l√† c∆° h·ªôi ƒë·ªÉ √¥n luy·ªán th√™m. H√£y ƒë·ªçc k·ªπ ƒë√°p √°n v√† l√†m l·∫°i b√†i nh√©!';
  }
  document.getElementById('score-big').textContent = total.toFixed(1);
  document.getElementById('score-p1').textContent = `${p1Correct}/24 (${(p1Correct*0.25).toFixed(2)}ƒë)`;
  document.getElementById('score-p2').textContent = `${p2Total.toFixed(2)}ƒë / 4ƒë`;
  document.getElementById('score-time').textContent = timeUsed;
  document.getElementById('score-pct').textContent = Math.round((total/10)*100) + '%';
  document.getElementById('result-modal').classList.add('active');
}

function closeModal() {
  document.getElementById('result-modal').classList.remove('active');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function resetQuiz() {
  submitted = false; p1Answers = {}; p2Answers = {};
  timeLeft = TOTAL_TIME; clearInterval(timerInterval);
  document.getElementById('timer-text').textContent = '45:00';
  document.getElementById('timer-text').className = '';
  document.getElementById('timer-fill').style.width = '100%';
  document.getElementById('timer-fill').className = 'timer-fill';
  document.getElementById('timeup-banner').classList.remove('show');
  document.getElementById('result-modal').classList.remove('active');
  shuffledP1Indices = [...Array(part1Questions.length).keys()];
  renderPart1(); renderPart2(); startTimer();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function init() {
  renderPart1(); renderPart2(); startTimer();
  const notice = document.createElement('div');
  notice.className = 'shuffle-notice';
  notice.textContent = '‚ú¶ Th·ª© t·ª± c√¢u h·ªèi ƒë√£ ƒë∆∞·ª£c x√°o tr·ªôn ng·∫´u nhi√™n ‚ú¶';
  document.getElementById('part1-container').insertAdjacentElement('beforebegin', notice);
}
init();
</script>
</body>
</html>

